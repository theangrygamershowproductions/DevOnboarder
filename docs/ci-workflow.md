# Continuous Integration Workflow

The `ci.yml` workflow runs on every push and pull request. It sets up Python 3.12 and Node.js 20 before building the containers and executing the test suites.

## Concurrency

A concurrency group of `${{ github.workflow }}-${{ github.ref }}` cancels in-progress runs when a new commit pushes to the same branch. This prevents stale jobs from consuming minutes.

## Caching

The job caches several directories to speed up subsequent runs:

- `~/.cache/pip` for Python packages
- `frontend/node_modules` and `bot/node_modules` for JavaScript dependencies
- `~/.cache/ms-playwright` for Playwright browsers

Cache keys include the runner OS, language version, and the related lock files so mismatched dependencies do not restore.

## Coverage Requirements

Both Python and JavaScript tests must maintain at least **95%** coverage. The workflow fails if any suite drops below this threshold. Coverage reports are uploaded as artifacts, and pull requests receive a summary comment generated by `scripts/post_coverage_comment.py`.

## GitHub CLI

The workflows install the GitHub CLI using `cli/cli-action@v2`. Each job then prints the path and version with `which gh` and `gh --version` so the logs show exactly which binary is in use.
