name: Markdownlint

on:
    pull_request:
    push:

concurrency:
    group: ${{ github.workflow }}-${{ github.ref }}
    cancel-in-progress: true

permissions:
    contents: read

jobs:
    lint:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@93cb6efe18208431cddfb8368fd83d5badbf9bfd  # TAGS-SHA-PIN: actions/checkout@v5.0.1 (2025-11-13)
            
            - name: Set up Node.js
              uses: actions/setup-node@395ad3262231945c25e8478fd5baf05154b1d79f  # TAGS-SHA-PIN: actions/setup-node@v6.1.0 (2025-12-03)
              with:
                  node-version: '22'
            
            - name: Install markdownlint-cli2
              # Version pinned per ACTIONS_POLICY.md - prevents unexpected behavior from automatic updates
              # Matches pattern: actions pinned to SHAs, tools pinned to specific versions
              # Update via scheduled automation (not floating latest)
              run: npm install -g markdownlint-cli2@0.13.0
            
            - name: Run markdownlint-cli2
              run: markdownlint-cli2 --config .markdownlint.json "*.md" "docs/**/*.md" "docs/v1/**/*.md"
